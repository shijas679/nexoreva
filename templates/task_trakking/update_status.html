{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/attendance_home.css' %}">
{% endblock %}

{% block content %}
<!-- Header/Navbar -->
<header class="header">
  <nav class="navbar">
    <!-- Logo -->
    <div class="logo-container">
      <img src="{% static 'images/logo.png' %}" alt="Nexoréva Logo" class="logo">
    </div>
  </nav>
</header>

<!-- Main Content -->
<div class="container">
    <h2>Update Task Status</h2>

    {% if staff_name %}
    <div class="staff-info">
        <strong>Staff:</strong> {{ staff_name }}
    </div>
    {% endif %}

    {% if success_message %}
    <div class="messages">
        <div class="message success">{{ success_message }}</div>
    </div>
    {% endif %}

    {% if error_message %}
    <div class="messages">
        <div class="message error">{{ error_message }}</div>
    </div>
    {% endif %}

    <div class="form-container">
        <form method="post" novalidate>
            {% csrf_token %}

            <!-- Staff Code -->
            <div class="input-group{% if frm.staff_code.errors %} has-error{% endif %}">
                {{ frm.staff_code }}
                <label for="{{ frm.staff_code.id_for_label }}">Staff Code</label>
                {% if frm.staff_code.errors %}
                <div class="error-message">
                    {{ frm.staff_code.errors|striptags }}
                </div>
                {% endif %}
            </div>

            <!-- Task Code -->
            <div class="input-group{% if frm.task_code.errors %} has-error{% endif %}">
                {{ frm.task_code }}
                <label for="{{ frm.task_code.id_for_label }}">Task Code</label>
                {% if frm.task_code.errors %}
                <div class="error-message">
                    {{ frm.task_code.errors|striptags }}
                </div>
                {% endif %}
            </div>

            <!-- Status -->
            <div class="input-group{% if frm.status.errors %} has-error{% endif %}">
                {{ frm.status }}
                <label for="{{ frm.status.id_for_label }}">Status</label>
                {% if frm.status.errors %}
                <div class="error-message">
                    {{ frm.status.errors|striptags }}
                </div>
                {% endif %}
            </div>

            <button type="submit">Update Status</button>
        </form>

        <a href="{% url 'task-status' %}" class="leave-btn back-button">← Back to Task Status</a>
    </div>
</div>
{% endblock %}
