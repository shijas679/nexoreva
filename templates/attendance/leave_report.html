{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/attendance.css' %}">
{% endblock %}

{% block content %}
<div class="main-content">
  <div class="container">
    <h2>Leave Requests</h2>

    <!-- Leave Requests Table -->
    <div class="table-section">
      <div class="table-wrapper">
        <table class="styled-table leave-requests-table">
          <thead>
            <tr>
              <th class="col-requested">Requested On</th>
              <th class="col-name">Staff Name</th>
              <th class="col-code">Staff Code</th>
              <th class="col-from">From Date</th>
              <th class="col-to">To Date</th>
              <th class="col-reason">Reason</th>
              <th class="col-status">Status</th>
            </tr>
          </thead>
          <tbody>
            {% for record in records %}
            <tr class="leave-row">
              <td class="col-requested date-cell">{{ record.request_date|date:"M d, Y H:i" }}</td>
              <td class="col-name">
                <div class="staff-name-cell">{{ record.staff.full_name }}</div>
              </td>
              <td class="col-code">
                <div class="staff-code-cell">{{ record.staff.staff_code }}</div>
              </td>
              <td class="col-from date-cell">{{ record.from_date|date:"M d, Y" }}</td>
              <td class="col-to date-cell">{{ record.to_date|date:"M d, Y" }}</td>
              <td class="col-reason">
                <div class="reason-cell">{{ record.reason }}</div>
              </td>
              <td class="col-status">
                {% if record.status == "Approved" %}
                  <span class="status-indicator approved">{{ record.status }}</span>
                {% elif record.status == "Rejected" %}
                  <span class="status-indicator rejected">{{ record.status }}</span>
                {% elif record.status == "Pending" %}
                  <span class="status-indicator pending">{{ record.status }}</span>
                {% else %}
                  <span class="status-indicator not-started">{{ record.status }}</span>
                {% endif %}
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="7" class="empty-state">
                <div class="empty-content">
                  <i class="bi bi-calendar-x"></i>
                  <h4>No leave requests found</h4>
                  <p>There are currently no leave requests to display.</p>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Back Button -->
    <div class="page-actions">
      <a href="{% url 'attendance_home' %}" class="btn-back">
        <i class="bi bi-arrow-left"></i>
        Back to Home
      </a>
    </div>
  </div>
</div>
{% endblock %}
