{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/attendance_report.css' %}">
{% endblock %}

{% block content %}
<div class="container">

  <h2>Leave Requests</h2>

  <div class="form-container" style="padding: 1.5rem 2rem; max-width: 1000px;">
    <div class="table-wrapper">
      <table class="styled-table" role="table" aria-label="Leave Requests">
        <thead>
          <tr>
            <th scope="col">Requested On</th>
            <th scope="col">Staff Name</th>
            <th scope="col">Staff Code</th>
            <th scope="col">From Date</th>
            <th scope="col">To Date</th>
            <th scope="col">Reason</th>
            <th scope="col">Status</th>
          </tr>
        </thead>
        <tbody>
          {% for record in records %}
          <tr>
            <td>{{ record.request_date|date:"Y-m-d H:i" }}</td>
            <td>{{ record.staff.full_name }}</td>
            <td>{{ record.staff.staff_code }}</td>
            <td>{{ record.from_date|date:"Y-m-d" }}</td>
            <td>{{ record.to_date|date:"Y-m-d" }}</td>
            <td>{{ record.reason }}</td>
            <td>
              <span class="status-indicator {{ record.status|lower }}">
                {{ record.status }}
              </span>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7" style="text-align:center; padding: 1rem; color: var(--text-muted);">
              No leave requests found.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <a href="{% url 'attendance_home' %}" class="leave-btn" style="display: inline-block; margin-top: 1.5rem;">
      Back
    </a>
  </div>
</div>
{% endblock %}
