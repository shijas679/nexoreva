<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>NEXORÉVA | {% block title %}{% endblock %}</title>
    {% load static %}
    
    <!-- Base CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'css/base.css' %}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- Extra CSS from child templates -->
    {% block extra_css %}{% endblock %}
  </head>
  <body>
    <!-- Sidebar Menu (show only if user is authenticated) -->
    {% if user.is_authenticated %}
    <div class="sidebar">
      <!-- Logo Section -->
      <div class="sidebar-logo">
        <img src="{% static 'images/logo.png' %}" alt="Nexoréva Logo" class="sidebar-logo-img">
      </div>
      
      <!-- Menu Items -->
      <nav class="sidebar-nav">
        <div class="nav-section">
          <h4 class="nav-section-title">Quick Actions</h4>
          
          <a href="{% url 'dashboard' %}" class="nav-item">
            <i class="bi bi-speedometer2"></i>
            <span>Dashboard</span>
          </a>
          
          <a href="{% url 'view_staff' %}" class="nav-item">
            <i class="bi bi-person-lines-fill"></i>
            <span>Onboardings</span>
          </a>
          
          <a href="{% url 'course_list' %}" class="nav-item">
            <i class="bi bi-journal-bookmark-fill"></i>
            <span>Courses</span>
          </a>
          
          <a href="{% url 'viewwork_assignment_userlist_staff' %}" class="nav-item">
            <i class="bi bi-clipboard-check"></i>
            <span>Assignments</span>
          </a>

          <a href="{% url 'attendence_details' %}" class="nav-item">
            <i class="bi bi-clipboard-data"></i>
            <span>Attendance Report</span>
          </a>

          <a href="{% url 'generate_certificate' %}" class="nav-item">
            <i class="bi bi-award"></i>
            <span>Certificates</span>
          </a>

          <a href="{% url 'payment_tracking' %}" class="nav-item">
            <i class="bi bi-credit-card"></i>
            <span>Track Payments</span>
          </a>
        </div>
        
        <!-- User Info and Logout Section -->
        <div class="nav-user-section">
          <div class="user-info">
            <i class="bi bi-person-circle"></i>
            <span>{{ user.username|title }}</span>
          </div>
          <div class="nav-logout">
            <a href="{% url 'logout' %}" class="logout-btn" onclick="return confirm('Are you sure you want to logout?')">
              <i class="bi bi-box-arrow-right"></i>
              <span>Logout</span>
            </a>
          </div>
        </div>
      </nav>
    </div>
    {% endif %}

    <!-- Main Content -->
    <main class="{% if user.is_authenticated %}with-sidebar{% endif %}">
      <!-- Messages -->
      {% if messages %}
      <div class="messages-container">
        {% for message in messages %}
        <div class="message {{ message.tags }}">
          <i class="bi {% if message.tags == 'success' %}bi-check-circle{% elif message.tags == 'error' %}bi-x-circle{% else %}bi-info-circle{% endif %}"></i>
          {{ message }}
          <button class="message-close" onclick="this.parentElement.remove()">×</button>
        </div>
        {% endfor %}
      </div>
      {% endif %}

      {% block content %}{% endblock %}
    </main>

    <script src="{% static 'js/script.js' %}"></script>
    
    <!-- Extra JavaScript from child templates -->
    {% block extra_js %}{% endblock %}
  </body>
</html>
